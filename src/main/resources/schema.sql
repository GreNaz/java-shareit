CREATE TABLE IF NOT EXISTS USERS
(
    ID    BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME  VARCHAR(255)                            NOT NULL,
    EMAIL VARCHAR(512)                            NOT NULL,
    CONSTRAINT PK_USER PRIMARY KEY (ID),
    CONSTRAINT UQ_USER_EMAIL UNIQUE (EMAIL)
);

CREATE TABLE IF NOT EXISTS ITEMS
(
    ID          BIGINT GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    NAME        VARCHAR(255)                        NOT NULL,
    DESCRIPTION VARCHAR(512)                        NOT NULL,
    AVAILABLE   BOOL                                NOT NULL,
    OWNER_ID    BIGINT                              NOT NULL REFERENCES USERS (ID) ON DELETE CASCADE
--     CONSTRAINT PK_USER PRIMARY KEY (ID),
--     CONSTRAINT UQ_USER_EMAIL UNIQUE (DESCRIPTION)
);
--
-- CREATE TABLE IF NOT EXISTS ITEMS ( ID BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY, USER_ID BIGINT, URL VARCHAR(1000), CONSTRAINT FK_ITEMS_TO_USERS FOREIGN KEY(USER_ID) REFERENCES USERS(ID), UNIQUE(ID, URL) );
-- НА ДАННЫЙ МОМЕНТ ВАМ ДОСТАТОЧНО СОЗДАТЬ ТАБЛИЦЫ ДЛЯ ДВУХ СУЩНОСТЕЙ, КОТОРЫЕ ВЫ УЖЕ РАЗРАБОТАЛИ — ITEM И USER.
-- CREATE TABLE IF NOT EXISTS TAGS ( ID BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY, ITEM_ID BIGINT, NAME VARCHAR(50), CONSTRAINT FK_TAGS_TO_ITEMS FOREIGN KEY(ITEM_ID) REFERENCES ITEMS(ID) );